<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-light-blue.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <title>Serial Number Decoding / Encoding Mockup</title>
  </head>

  <body>
    <div style="margin:auto;width:80%;">
        <p>
            <a href="view.html">Module Quality Flags Mockup</a>
            <a href="locationClick.html">Clickable Slot Location Selection Mockup</a>
            <i>Serial Number Decoding / Encoding Mockup (this page)</i>
        </p>
        <h1>Serial Number Decoding / Encoding Mockup</h1>
        <script src="SNscript.js"></script>
        <p>Serial numbers for HGTD are documented in
            <a href="https://cds.cern.ch/record/2910370/files/ATL-COM-HGTD-2024-026.pdf" target="_blank">an internal note</a>.</p>
        <p><em><span style="color:red;">If you want to decode:</span></em> Just type in the serial number.
            You receive the corresponding fields and, if applicable, a note on the validity of the serial number.
            For regular parts, use the ATLAS convention with 14 digits like 20WXXYYYYYYYYY (XX: for component type,
            remaining Y: individual per component). For properties that have a human-readable explainer comment,
            this will be written in parenthesis. For slots, the pattern must match Vx:Lx:Qx:Rx:Mx (replace the x).</p>
        <p><em><span style="color:red;">If you want to encode:</span></em> Specify the part and corresponding properties
            that are used to build the SN.</p>

        <h2>Decode (SN known, properties unknown)</h2>

        <label for="snIn">Serial number:</label>
        <input id="snIn" name="snIn-input" oninput="getPropertiesFromSN()" value="Serial number" type="text" />
        <br><br>
        <output id="lengthMessageOut">
        </output>
        <output id="messageOut">
        </output>
        <br><br>
        <output id="propertiesOut">
        </output>
        <hr>

        <h2>Encode (properties known, SN unknown)</h2>

        <label for="kopIn">Kind of part:</label>
        <select name="kopIn" id="kopIn-select" onchange="getSNFromProperties()">
            <option value="ASIC">ASIC</option>
            <option value="Detector Unit">Detector Unit</option>
            <option value="Flex Tail" selected>Flex Tail</option>
            <option value="Glue">Glue</option>
            <option value="Hybrid">Hybrid</option>
            <option value="Module">Module</option>
            <option value="Module Flex">Module Flex</option>
            <option value="PEB">PEB</option>
            <option value="Sensor">Sensor</option>
            <option value="Slot">Slot</option>
            <option value="Support Unit">Support Unit</option>
            <option value="Wafer">Wafer</option>
        </select>
        Encoded SN: <output id="snOut">
        </output>
        <br>
        <i>Please fill in or select all required properties.</i>
        <div class="encodeSN hidden" id="encodeASIC">
            ASIC
        </div>
        <div class="encodeSN" id="encodeFT">
            <label for="ft-manuIn">Manufacturer / Vendor:</label>
            <select name="ft-manuIn" id="ft-manuIn-select" onchange="getSNFromProperties()">
                <option value="G">Germany</option>
                <option value="C">China</option>
                <option value="S" selected>Slovenia</option>
            </select>
            <br>
            <label for="ft-prodIn">Production:</label>
            <select name="ft-prodIn" id="ft-prodIn-select" onchange="getSNFromProperties()">
                <option value="M" selected>Main production</option>
                <option value="P">Pre-production</option>
                <option value="D">demonstrator</option>
                <option value="T">test</option>
                <option value="O">other</option>
            </select>
            <br>
            <label for="ft-batchnIn">Batch number:</label>
            <input id="ft-batchnIn" name="ft-batchnIn-input" oninput="getSNFromProperties()" value="1" type="text" />
            <br>
            <label for="ft-readoutIn">Readout:</label>
            <select name="ft-readoutIn" id="ft-readoutIn-select" onchange="getSNFromProperties()">
                <option value="R" selected>single readout</option>
                <option value="F">full readout</option>
            </select>
            <br>
            <label for="ft-typeIn">Type:</label>
            <input id="ft-typeIn" name="ft-typeIn-input" oninput="getSNFromProperties()" value="76" type="text" />
            <br>
            <label for="ft-counterIn">Counter:</label>
            <input id="ft-counterIn" name="ft-counterIn-input" oninput="getSNFromProperties()" value="001" type="text" />
            <br>
        </div>
        <br><br>
        <hr>
    </div>
  </body>
</html>
